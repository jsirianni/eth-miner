# Managed by Chef
[Unit]
Description=Claymore Etherium Mining Service
After=network.target

[Service]
Type=simple
User=<%=node[:miner][:user]%>
Group=<%=node[:miner][:user]%>
RuntimeDirectory=<%=node[:miner][:claymore][:inst_dir]%>
Environment=GPU_MAX_ALLOC_PERCENT=<%node[:miner][:claymore][:gpu_alloc]%>
ExecStart=<%=node[:miner][:claymore][:executable]%> \
      -epool <%=node[:miner][:claymore][:pool]%> \
      -ewal <%=node[:miner][:address]%>.<%=node[:miner][:worker_name]%> \
      -epsw x -mode 1 \
      -tt 68 \
      -allpools 1

# restart claymore if it crashes
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
